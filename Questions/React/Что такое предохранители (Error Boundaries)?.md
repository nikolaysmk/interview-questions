Предохранители (Error Boundaries) - это компоненты React, которые перехватывают ошибки JavaScript в любом месте своего дочернего дерева компонентов, записывают эти ошибки и отображают запасной UI вместо дерева компонентов, которое вышло из строя¹²³. Предохранители (Error Boundaries) перехватывают ошибки во время рендеринга, в методах жизненного цикла и в конструкторах всего дерева под ними¹²³.

Предохранители (Error Boundaries) - это не часть API React. Это паттерн, который возникает из композиционной природы React. В отличие от обычного компонента, который преобразует пропсы в UI, предохранитель (Error Boundary) преобразует компонент в другой компонент¹²³.

Классовый компонент становится предохранителем (Error Boundary), если он определяет один или оба метода жизненного цикла static getDerivedStateFromError() или componentDidCatch()¹²³. Используйте static getDerivedStateFromError() для отображения запасного UI после возникновения ошибки. Используйте componentDidCatch() для записи информации об ошибке¹²³.

Пример использования предохранителя (Error Boundary):

```jsx
import React from 'react';

class ErrorBoundary extends React.Component {
  state = {
    error: null,
  };

  static getDerivedStateFromError(error) {
    // Обновляем состояние, чтобы следующий рендер показал запасной UI.
    return { error: error };
  }

  componentDidCatch(error, info) {
    // Вы также можете записать ошибку в сервис отчетов об ошибках
    logErrorToMyService(error, info);
  }

  render() {
    if (this.state.error) {
      // Вы можете отрендерить любой запасной UI
      return <h1>Что-то пошло не так.</h1>;
    }

    return this.props.children;
  }
}

export default ErrorBoundary;
```

Затем вы можете использовать его как обычный компонент:

```jsx
<ErrorBoundary>
  <MyWidget />
</ErrorBoundary>
```

Предохранители (Error Boundaries) работают как блок catch {} в JavaScript, но для компонентов. Только классовые компоненты могут быть предохранителями (Error Boundaries). На практике, большую часть времени вы захотите объявить предохранитель (Error Boundary) один раз и использовать его по всему вашему приложению. Обратите внимание, что предохранители (Error Boundaries) перехватывают ошибки только в компонентах под ними в дереве. Предохранитель (Error Boundary) не может перехватить ошибку внутри себя. Если предохранитель (Error Boundary) не сможет отрендерить сообщение об ошибке, ошибка будет распространяться к ближайшему предохранителю (Error Boundary) выше него. Это также похоже на то, как работает блок catch {} в JavaScript.
